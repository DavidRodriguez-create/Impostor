!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e={es:{places:{name:"üèñÔ∏è Lugares",words:{beach:"Playa",mountain:"Monta√±a",city:"Ciudad",forest:"Bosque",desert:"Desierto",river:"R√≠o",lake:"Lago",park:"Parque",museum:"Museo",cinema:"Cine",theater:"Teatro",library:"Biblioteca",hospital:"Hospital",school:"Escuela",restaurant:"Restaurante",cafe:"Caf√©",market:"Mercado",airport:"Aeropuerto",station:"Estaci√≥n",hotel:"Hotel"}},food:{name:"üçï Comida",words:{pizza:"Pizza",burger:"Hamburguesa",pasta:"Pasta",sushi:"Sushi",tacos:"Tacos",paella:"Paella",salad:"Ensalada",icecream:"Helado",chocolate:"Chocolate",coffee:"Caf√©",tea:"T√©",water:"Agua",juice:"Zumo",bread:"Pan",cheese:"Queso",fruit:"Fruta",vegetable:"Verdura",meat:"Carne",fish:"Pescado",rice:"Arroz"}},animals:{name:"üê∂ Animales",words:{dog:"Perro",cat:"Gato",lion:"Le√≥n",tiger:"Tigre",elephant:"Elefante",giraffe:"Jirafa",zebra:"Cebra",monkey:"Mono",bear:"Oso",wolf:"Lobo",fox:"Zorro",rabbit:"Conejo",bird:"P√°jaro",fish:"Pez",dolphin:"Delf√≠n",whale:"Ballena",shark:"Tibur√≥n",turtle:"Tortuga",snake:"Serpiente",crocodile:"Cocodrilo"}},objects:{name:"üì± Objetos",words:{phone:"Tel√©fono",computer:"Ordenador",television:"Televisi√≥n",watch:"Reloj",book:"Libro",table:"Mesa",chair:"Silla",bed:"Cama",door:"Puerta",window:"Ventana",key:"Llave",pen:"Bol√≠grafo",paper:"Papel",car:"Coche",bicycle:"Bicicleta",airplane:"Avi√≥n",boat:"Barco",train:"Tren",ball:"Pelota",guitar:"Guitarra"}},activities:{name:"‚öΩ Actividades",words:{soccer:"F√∫tbol",basketball:"Baloncesto",swimming:"Nataci√≥n",running:"Correr",dancing:"Bailar",singing:"Cantar",reading:"Leer",writing:"Escribir",painting:"Pintar",cooking:"Cocinar",traveling:"Viajar",sleeping:"Dormir",studying:"Estudiar",working:"Trabajar",playing:"Jugar",watchtv:"Ver TV",listenmusic:"Escuchar m√∫sica",shopping:"Comprar",walking:"Pasear",meditating:"Meditar"}},professions:{name:"üë®‚Äç‚öïÔ∏è Profesiones",words:{doctor:"Doctor",teacher:"Profesor",engineer:"Ingeniero",lawyer:"Abogado",chef:"Chef",artist:"Artista",musician:"M√∫sico",actor:"Actor",athlete:"Deportista",police:"Polic√≠a",firefighter:"Bombero",pilot:"Piloto",architect:"Arquitecto",writer:"Escritor",photographer:"Fot√≥grafo",designer:"Dise√±ador",programmer:"Programador",scientist:"Cient√≠fico",veterinarian:"Veterinario",dentist:"Dentista"}},colors:{name:"üåà Colores y Formas",words:{red:"Rojo",blue:"Azul",green:"Verde",yellow:"Amarillo",orange:"Naranja",purple:"Morado",pink:"Rosa",black:"Negro",white:"Blanco",gray:"Gris",circle:"C√≠rculo",square:"Cuadrado",triangle:"Tri√°ngulo",rectangle:"Rect√°ngulo",star:"Estrella",heart:"Coraz√≥n",diamond:"Diamante",line:"L√≠nea",dot:"Punto",spiral:"Espiral"}},emotions:{name:"üòä Emociones",words:{happiness:"Felicidad",sadness:"Tristeza",joy:"Alegr√≠a",fear:"Miedo",surprise:"Sorpresa",love:"Amor",anger:"Enojo",calm:"Calma",anxiety:"Ansiedad",excitement:"Emoci√≥n",boredom:"Aburrimiento",curiosity:"Curiosidad",confusion:"Confusi√≥n",pride:"Orgullo",shame:"Verg√ºenza",jealousy:"Celos",gratitude:"Gratitud",hope:"Esperanza",nostalgia:"Nostalgia",peace:"Paz"}}},en:{places:{name:"üèñÔ∏è Places",words:{beach:"Beach",mountain:"Mountain",city:"City",forest:"Forest",desert:"Desert",river:"River",lake:"Lake",park:"Park",museum:"Museum",cinema:"Cinema",theater:"Theater",library:"Library",hospital:"Hospital",school:"School",restaurant:"Restaurant",cafe:"Caf√©",market:"Market",airport:"Airport",station:"Station",hotel:"Hotel"}},food:{name:"üçï Food",words:{pizza:"Pizza",burger:"Burger",pasta:"Pasta",sushi:"Sushi",tacos:"Tacos",paella:"Paella",salad:"Salad",icecream:"Ice cream",chocolate:"Chocolate",coffee:"Coffee",tea:"Tea",water:"Water",juice:"Juice",bread:"Bread",cheese:"Cheese",fruit:"Fruit",vegetable:"Vegetable",meat:"Meat",fish:"Fish",rice:"Rice"}},animals:{name:"üê∂ Animals",words:{dog:"Dog",cat:"Cat",lion:"Lion",tiger:"Tiger",elephant:"Elephant",giraffe:"Giraffe",zebra:"Zebra",monkey:"Monkey",bear:"Bear",wolf:"Wolf",fox:"Fox",rabbit:"Rabbit",bird:"Bird",fish:"Fish",dolphin:"Dolphin",whale:"Whale",shark:"Shark",turtle:"Turtle",snake:"Snake",crocodile:"Crocodile"}},objects:{name:"üì± Objects",words:{phone:"Phone",computer:"Computer",television:"Television",watch:"Watch",book:"Book",table:"Table",chair:"Chair",bed:"Bed",door:"Door",window:"Window",key:"Key",pen:"Pen",paper:"Paper",car:"Car",bicycle:"Bicycle",airplane:"Airplane",boat:"Boat",train:"Train",ball:"Ball",guitar:"Guitar"}},activities:{name:"‚öΩ Activities",words:{soccer:"Soccer",basketball:"Basketball",swimming:"Swimming",running:"Running",dancing:"Dancing",singing:"Singing",reading:"Reading",writing:"Writing",painting:"Painting",cooking:"Cooking",traveling:"Traveling",sleeping:"Sleeping",studying:"Studying",working:"Working",playing:"Playing",watchtv:"Watch TV",listenmusic:"Listen music",shopping:"Shopping",walking:"Walking",meditating:"Meditating"}},professions:{name:"üë®‚Äç‚öïÔ∏è Professions",words:{doctor:"Doctor",teacher:"Teacher",engineer:"Engineer",lawyer:"Lawyer",chef:"Chef",artist:"Artist",musician:"Musician",actor:"Actor",athlete:"Athlete",police:"Police",firefighter:"Firefighter",pilot:"Pilot",architect:"Architect",writer:"Writer",photographer:"Photographer",designer:"Designer",programmer:"Programmer",scientist:"Scientist",veterinarian:"Veterinarian",dentist:"Dentist"}},colors:{name:"üåà Colors & Shapes",words:{red:"Red",blue:"Blue",green:"Green",yellow:"Yellow",orange:"Orange",purple:"Purple",pink:"Pink",black:"Black",white:"White",gray:"Gray",circle:"Circle",square:"Square",triangle:"Triangle",rectangle:"Rectangle",star:"Star",heart:"Heart",diamond:"Diamond",line:"Line",dot:"Dot",spiral:"Spiral"}},emotions:{name:"üòä Emotions",words:{happiness:"Happiness",sadness:"Sadness",joy:"Joy",fear:"Fear",surprise:"Surprise",love:"Love",anger:"Anger",calm:"Calm",anxiety:"Anxiety",excitement:"Excitement",boredom:"Boredom",curiosity:"Curiosity",confusion:"Confusion",pride:"Pride",shame:"Shame",jealousy:"Jealousy",gratitude:"Gratitude",hope:"Hope",nostalgia:"Nostalgia",peace:"Peace"}}},fr:{places:{name:"üèñÔ∏è Lieux",words:{beach:"Plage",mountain:"Montagne",city:"Ville",forest:"For√™t",desert:"D√©sert",river:"Rivi√®re",lake:"Lac",park:"Parc",museum:"Mus√©e",cinema:"Cin√©ma",theater:"Th√©√¢tre",library:"Biblioth√®que",hospital:"H√¥pital",school:"√âcole",restaurant:"Restaurant",cafe:"Caf√©",market:"March√©",airport:"A√©roport",station:"Gare",hotel:"H√¥tel"}},food:{name:"üçï Nourriture",words:{pizza:"Pizza",burger:"Hamburger",pasta:"P√¢tes",sushi:"Sushi",tacos:"Tacos",paella:"Paella",salad:"Salade",icecream:"Glace",chocolate:"Chocolat",coffee:"Caf√©",tea:"Th√©",water:"Eau",juice:"Jus",bread:"Pain",cheese:"Fromage",fruit:"Fruit",vegetable:"L√©gume",meat:"Viande",fish:"Poisson",rice:"Riz"}},animals:{name:"üê∂ Animaux",words:{dog:"Chien",cat:"Chat",lion:"Lion",tiger:"Tigre",elephant:"√âl√©phant",giraffe:"Girafe",zebra:"Z√®bre",monkey:"Singe",bear:"Ours",wolf:"Loup",fox:"Renard",rabbit:"Lapin",bird:"Oiseau",fish:"Poisson",dolphin:"Dauphin",whale:"Baleine",shark:"Requin",turtle:"Tortue",snake:"Serpent",crocodile:"Crocodile"}},objects:{name:"üì± Objets",words:{phone:"T√©l√©phone",computer:"Ordinateur",television:"T√©l√©vision",watch:"Montre",book:"Livre",table:"Table",chair:"Chaise",bed:"Lit",door:"Porte",window:"Fen√™tre",key:"Cl√©",pen:"Stylo",paper:"Papier",car:"Voiture",bicycle:"V√©lo",airplane:"Avion",boat:"Bateau",train:"Train",ball:"Ballon",guitar:"Guitare"}},activities:{name:"‚öΩ Activit√©s",words:{soccer:"Football",basketball:"Basketball",swimming:"Natation",running:"Course",dancing:"Danser",singing:"Chanter",reading:"Lire",writing:"√âcrire",painting:"Peindre",cooking:"Cuisiner",traveling:"Voyager",sleeping:"Dormir",studying:"√âtudier",working:"Travailler",playing:"Jouer",watchtv:"Regarder la TV",listenmusic:"√âcouter de la musique",shopping:"Faire du shopping",walking:"Se promener",meditating:"M√©diter"}},professions:{name:"üë®‚Äç‚öïÔ∏è Professions",words:{doctor:"M√©decin",teacher:"Professeur",engineer:"Ing√©nieur",lawyer:"Avocat",chef:"Chef",artist:"Artiste",musician:"Musicien",actor:"Acteur",athlete:"Athl√®te",police:"Policier",firefighter:"Pompier",pilot:"Pilote",architect:"Architecte",writer:"√âcrivain",photographer:"Photographe",designer:"Designer",programmer:"Programmeur",scientist:"Scientifique",veterinarian:"V√©t√©rinaire",dentist:"Dentiste"}},colors:{name:"üåà Couleurs et Formes",words:{red:"Rouge",blue:"Bleu",green:"Vert",yellow:"Jaune",orange:"Orange",purple:"Violet",pink:"Rose",black:"Noir",white:"Blanc",gray:"Gris",circle:"Cercle",square:"Carr√©",triangle:"Triangle",rectangle:"Rectangle",star:"√âtoile",heart:"C≈ìur",diamond:"Diamant",line:"Ligne",dot:"Point",spiral:"Spirale"}},emotions:{name:"üòä √âmotions",words:{happiness:"Bonheur",sadness:"Tristesse",joy:"Joie",fear:"Peur",surprise:"Surprise",love:"Amour",anger:"Col√®re",calm:"Calme",anxiety:"Anxi√©t√©",excitement:"Excitation",boredom:"Ennui",curiosity:"Curiosit√©",confusion:"Confusion",pride:"Fiert√©",shame:"Honte",jealousy:"Jalousie",gratitude:"Gratitude",hope:"Espoir",nostalgia:"Nostalgie",peace:"Paix"}}},zh:{places:{name:"üèñÔ∏è Âú∞ÁÇπ",words:{beach:"Êµ∑Êª©",mountain:"Â±±",city:"ÂüéÂ∏Ç",forest:"Ê£ÆÊûó",desert:"Ê≤ôÊº†",river:"Ê≤≥ÊµÅ",lake:"Êπñ",park:"ÂÖ¨Âõ≠",museum:"ÂçöÁâ©È¶Ü",cinema:"ÁîµÂΩ±Èô¢",theater:"ÂâßÈô¢",library:"Âõæ‰π¶È¶Ü",hospital:"ÂåªÈô¢",school:"Â≠¶Ê†°",restaurant:"È§êÂéÖ",cafe:"ÂíñÂï°È¶Ü",market:"Â∏ÇÂú∫",airport:"Êú∫Âú∫",station:"ËΩ¶Á´ô",hotel:"ÈÖíÂ∫ó"}},food:{name:"üçï È£üÁâ©",words:{pizza:"Êä´Ëê®",burger:"Ê±âÂ†°",pasta:"ÊÑèÂ§ßÂà©Èù¢",sushi:"ÂØøÂè∏",tacos:"Â°îÂèØ",paella:"Êµ∑È≤úÈ•≠",salad:"Ê≤ôÊãâ",icecream:"ÂÜ∞Ê∑áÊ∑ã",chocolate:"Â∑ßÂÖãÂäõ",coffee:"ÂíñÂï°",tea:"Ëå∂",water:"Ê∞¥",juice:"ÊûúÊ±Å",bread:"Èù¢ÂåÖ",cheese:"Â•∂ÈÖ™",fruit:"Ê∞¥Êûú",vegetable:"Ëî¨Ëèú",meat:"ËÇâ",fish:"È±º",rice:"Á±≥È•≠"}},animals:{name:"üê∂ Âä®Áâ©",words:{dog:"Áãó",cat:"Áå´",lion:"ÁãÆÂ≠ê",tiger:"ËÄÅËôé",elephant:"Â§ßË±°",giraffe:"ÈïøÈ¢àÈπø",zebra:"ÊñëÈ©¨",monkey:"Áå¥Â≠ê",bear:"ÁÜä",wolf:"Áãº",fox:"ÁãêÁã∏",rabbit:"ÂÖîÂ≠ê",bird:"È∏ü",fish:"È±º",dolphin:"Êµ∑Ë±ö",whale:"È≤∏È±º",shark:"È≤®È±º",turtle:"Êµ∑Èæü",snake:"Ëõá",crocodile:"È≥ÑÈ±º"}},objects:{name:"üì± Áâ©ÂìÅ",words:{phone:"ÁîµËØù",computer:"ÁîµËÑë",television:"ÁîµËßÜ",watch:"ÊâãË°®",book:"‰π¶",table:"Ê°åÂ≠ê",chair:"Ê§ÖÂ≠ê",bed:"Â∫ä",door:"Èó®",window:"Á™óÊà∑",key:"Èí•Âåô",pen:"Á¨î",paper:"Á∫∏",car:"Ê±ΩËΩ¶",bicycle:"Ëá™Ë°åËΩ¶",airplane:"È£ûÊú∫",boat:"Ëàπ",train:"ÁÅ´ËΩ¶",ball:"ÁêÉ",guitar:"Âêâ‰ªñ"}},activities:{name:"‚öΩ Ê¥ªÂä®",words:{soccer:"Ë∂≥ÁêÉ",basketball:"ÁØÆÁêÉ",swimming:"Ê∏∏Ê≥≥",running:"Ë∑ëÊ≠•",dancing:"Ë∑≥Ëàû",singing:"Âî±Ê≠å",reading:"ÈòÖËØª",writing:"ÂÜô‰Ωú",painting:"ÁªòÁîª",cooking:"ÁÉπÈ•™",traveling:"ÊóÖË°å",sleeping:"Áù°Ëßâ",studying:"Â≠¶‰π†",working:"Â∑•‰Ωú",playing:"Áé©ËÄç",watchtv:"ÁúãÁîµËßÜ",listenmusic:"Âê¨Èü≥‰πê",shopping:"Ë¥≠Áâ©",walking:"Êï£Ê≠•",meditating:"ÂÜ•ÊÉ≥"}},professions:{name:"üë®‚Äç‚öïÔ∏è ËÅå‰∏ö",words:{doctor:"ÂåªÁîü",teacher:"ÊïôÂ∏à",engineer:"Â∑•Á®ãÂ∏à",lawyer:"ÂæãÂ∏à",chef:"Âé®Â∏à",artist:"Ëâ∫ÊúØÂÆ∂",musician:"Èü≥‰πêÂÆ∂",actor:"ÊºîÂëò",athlete:"ËøêÂä®Âëò",police:"Ë≠¶ÂØü",firefighter:"Ê∂àÈò≤Âëò",pilot:"È£ûË°åÂëò",architect:"Âª∫Á≠ëÂ∏à",writer:"‰ΩúÂÆ∂",photographer:"ÊëÑÂΩ±Â∏à",designer:"ËÆæËÆ°Â∏à",programmer:"Á®ãÂ∫èÂëò",scientist:"ÁßëÂ≠¶ÂÆ∂",veterinarian:"ÂÖΩÂåª",dentist:"ÁâôÂåª"}},colors:{name:"üåà È¢úËâ≤ÂíåÂΩ¢Áä∂",words:{red:"Á∫¢Ëâ≤",blue:"ËìùËâ≤",green:"ÁªøËâ≤",yellow:"ÈªÑËâ≤",orange:"Ê©ôËâ≤",purple:"Á¥´Ëâ≤",pink:"Á≤âËâ≤",black:"ÈªëËâ≤",white:"ÁôΩËâ≤",gray:"ÁÅ∞Ëâ≤",circle:"ÂúÜÂΩ¢",square:"Ê≠£ÊñπÂΩ¢",triangle:"‰∏âËßíÂΩ¢",rectangle:"ÈïøÊñπÂΩ¢",star:"ÊòüÂΩ¢",heart:"ÂøÉÂΩ¢",diamond:"Ëè±ÂΩ¢",line:"Á∫ø",dot:"ÁÇπ",spiral:"Ëû∫Êóã"}},emotions:{name:"üòä ÊÉÖÁª™",words:{happiness:"Âπ∏Á¶è",sadness:"ÊÇ≤‰º§",joy:"Âø´‰πê",fear:"ÊÅêÊÉß",surprise:"ÊÉäËÆ∂",love:"Áà±",anger:"ÊÑ§ÊÄí",calm:"Âπ≥Èùô",anxiety:"ÁÑ¶Ëôë",excitement:"ÂÖ¥Â•ã",boredom:"Êó†ËÅä",curiosity:"Â•ΩÂ•á",confusion:"Âõ∞ÊÉë",pride:"Ëá™Ë±™",shame:"ÁæûÊÑß",jealousy:"Â´âÂ¶í",gratitude:"ÊÑüÊøÄ",hope:"Â∏åÊúõ",nostalgia:"ÊÄÄÊóß",peace:"ÂíåÂπ≥"}}}};const t=Object.assign({}),o=Object.keys(t).length||11;function r(e,t){return function(e){const t=[...e];for(let o=t.length-1;o>0;o--){const e=Math.floor(Math.random()*(o+1));[t[o],t[e]]=[t[e],t[o]]}return t}(e).slice(0,t)}const n=new class{constructor(){this.players=[],this.maxPlayers=100,this.impostorCount=1,this.selectedThemes=[],this.gameWord="",this.gameWordTheme=null,this.gameWordKey=null,this.timerMode="infinite",this.timerMinutes=5,this.timerInterval=null,this.gameStartTime=null,this.currentPlayerIndex=0,this.impostors=[],this.revealedImpostors=[],this.votedPlayers=[],this.votingResults=[],this.allVotedPlayerIds=[]}addPlayer(e){return t=this.players.length,r=this.maxPlayers,t<r&&(this.players.push(function(e){const t=Math.floor(Math.random()*o)+1;return{id:Date.now()+Math.random(),name:e,avatar:`./avatars/avatar-${t}.png`,isImpostor:!1}}(e)),!0);var t,r}removePlayer(e){this.players=function(e,t){return e.filter(e=>e.id!==t)}(this.players,e)}assignRoles(){const t=function(t){const o=localStorage.getItem("language")||"es",r=e[o]||e.es;if(!t||0===t.length)return{themeKey:null,wordKey:null,word:"en"===o?"Word":"Palabra"};const n=[];return t.forEach(e=>{r[e]&&Object.keys(r[e].words).forEach(t=>{n.push({themeKey:e,wordKey:t,word:r[e].words[t]})})}),0===n.length?{themeKey:null,wordKey:null,word:"en"===o?"Word":"Palabra"}:n[Math.floor(Math.random()*n.length)]}(this.selectedThemes);this.gameWord=t.word,this.gameWordTheme=t.themeKey,this.gameWordKey=t.wordKey,this.players.forEach(e=>e.isImpostor=!1),this.impostors=r(this.players,this.impostorCount),function(e,t){t.forEach(t=>{const o=e.find(e=>e.id===t.id);o&&(o.isImpostor=!0)})}(this.players,this.impostors),this.revealedImpostors=[],this.currentPlayerIndex=0}getCurrentWord(){return this.gameWordTheme&&this.gameWordKey?function(t,o){const r=localStorage.getItem("language")||"es",n=e[r]||e.es;return t&&o&&n[t]&&n[t].words[o]||("en"===r?"Word":"Palabra")}(this.gameWordTheme,this.gameWordKey):this.gameWord}getCurrentPlayer(){return this.players[this.currentPlayerIndex]}nextPlayer(){return this.currentPlayerIndex++,this.currentPlayerIndex<this.players.length}isLastPlayer(){return this.currentPlayerIndex===this.players.length-1}startGameTimer(){if("timed"!==this.timerMode)return;this.gameStartTime=Date.now();const e=(t=this.timerMinutes,Date.now()+60*t*1e3);var t;this.timerInterval=setInterval(()=>{const t=function(e){return Math.max(0,e-Date.now())}(e);var o;t<=0?this.stopTimer():(this.updateTimerDisplay((o=t,`${Math.floor(o/6e4)}:${Math.floor(o%6e4/1e3).toString().padStart(2,"0")}`)),t<=0&&this.enableRevealButton())},100)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.updateTimerDisplay("0:00"),this.enableRevealButton()}updateTimerDisplay(e){const t=document.getElementById("timer-text");t&&(t.textContent=e)}enableRevealButton(){const e=document.getElementById("reveal-impostor-btn"),t=document.getElementById("vote-btn");e&&(e.disabled=!1),t&&(t.disabled=!1)}revealNextImpostor(){const e=this.impostors.filter(e=>!this.revealedImpostors.find(t=>t.id===e.id));return e.length>0?(this.revealedImpostors.push(e[0]),e[0]):null}hasMoreImpostors(){return this.revealedImpostors.length<this.impostors.length}voteForPlayer(e){const t=this.votedPlayers.indexOf(e);return t>-1?(this.votedPlayers.splice(t,1),!1):this.votedPlayers.length<this.impostorCount&&(this.votedPlayers.push(e),!0)}isPlayerVoted(e){return this.votedPlayers.includes(e)}getRemainingVotes(){return this.impostorCount-this.votedPlayers.length}processVotes(){return this.votingResults=this.votedPlayers.map(e=>{const t=this.players.find(t=>t.id===e),o=this.impostors.find(t=>t.id===e);return this.allVotedPlayerIds.includes(e)||this.allVotedPlayerIds.push(e),o&&!this.revealedImpostors.find(t=>t.id===e)&&this.revealedImpostors.push(t),{player:t,isImpostor:!!o,correct:!!o}}),this.votingResults}hasBeenVotedBefore(e){return this.allVotedPlayerIds.includes(e)}resetVoting(){this.votedPlayers=[]}reset(){this.stopTimer(),this.currentPlayerIndex=0,this.impostors=[],this.revealedImpostors=[],this.gameStartTime=null,this.votedPlayers=[],this.votingResults=[],this.allVotedPlayerIds=[]}resetAll(){this.reset(),this.players=[]}},a={es:{gameTitle:"üé≠ Impostor",startButton:"Comenzar Juego",selectThemes:"Selecciona Temas",selectThemesSubtitle:"Elige uno o m√°s temas para las palabras secretas",themesSelected:"Temas seleccionados:",continueToSetup:"Continuar al Setup",words:"palabras",configuration:"Configuraci√≥n",impostorCount:"N√∫mero de impostores:",timeMode:"Modo de tiempo:",timeModeInfinite:"Infinito",timeModeTimed:"Temporizador",minutes:"Minutos:",players:"Jugadores",playerNamePlaceholder:"Nombre del jugador",addButton:"‚ûï A√±adir",playersCount:"Jugadores:",startGame:"Empezar Juego",changeThemes:"Cambiar Temas",swipeUp:"Desliza hacia arriba",toSeeRole:"para ver tu rol",nextPlayer:"Siguiente Jugador",startGameNow:"Empezar Juego",impostor:"IMPOSTOR",impostorSubtitle:"Act√∫a con naturalidad",yourWordIs:"TU PALABRA ES:",revealedByButton:"üòà ¬°No me encontraron!",gameStarted:"¬°El juego ha comenzado!",gameContinues:"El juego contin√∫a...",gameOver:"¬°Se acab√≥!",discoverImpostors:"Descubre qui√©nes son los impostores",impostorsRemaining:"Impostores por descubrir:",revealImpostor:"Revelar Impostor",revealNextImpostor:"Revelar Siguiente Impostor",allRevealed:"¬°Todos Revelados!",voteForImpostors:"Votar por Impostores",selectPlayers:"Selecciona a los sospechosos",votesRemaining:"Votos restantes:",confirmVotes:"Confirmar Votos",votingResults:"Resultados de la Votaci√≥n",correctGuess:"¬°Correcto! Era impostor",wrongGuess:"¬°Incorrecto! No era impostor",playAgain:"Jugar de Nuevo",backToStart:"Volver al Inicio",winnersImpostors:"üéâ ¬°Ganaron los Impostores!",winnersPlayers:"üéâ ¬°Ganaron los Jugadores!",maxPlayersReached:"M√°ximo de {max} jugadores alcanzado",nameAlreadyUsed:"Este nombre ya est√° en uso. Elige uno diferente.",needMinPlayers:"Necesitas al menos 3 jugadores",impostorsTooMany:"El n√∫mero de impostores debe ser menor que el n√∫mero de jugadores"},en:{gameTitle:"üé≠ Impostor",startButton:"Start Game",selectThemes:"Select Themes",selectThemesSubtitle:"Choose one or more themes for the secret words",themesSelected:"Themes selected:",continueToSetup:"Continue to Setup",words:"words",configuration:"Configuration",impostorCount:"Number of impostors:",timeMode:"Time mode:",timeModeInfinite:"Infinite",timeModeTimed:"Timer",minutes:"Minutes:",players:"Players",playerNamePlaceholder:"Player name",addButton:"‚ûï Add",playersCount:"Players:",startGame:"Start Game",changeThemes:"Change Themes",swipeUp:"Swipe up",toSeeRole:"to see your role",nextPlayer:"Next Player",startGameNow:"Start Game",impostor:"IMPOSTOR",impostorSubtitle:"Act naturally",yourWordIs:"YOUR WORD IS:",revealedByButton:"üòà You didn't find me!",gameStarted:"The game has started!",gameContinues:"The game continues...",gameOver:"Game over!",discoverImpostors:"Discover who the impostors are",impostorsRemaining:"Impostors to discover:",revealImpostor:"Reveal Impostor",revealNextImpostor:"Reveal Next Impostor",allRevealed:"All Revealed!",voteForImpostors:"Vote for Impostors",selectPlayers:"Select the suspects",votesRemaining:"Votes remaining:",confirmVotes:"Confirm Votes",votingResults:"Voting Results",correctGuess:"Correct! Was an impostor",wrongGuess:"Wrong! Not an impostor",playAgain:"Play Again",backToStart:"Back to Start",winnersImpostors:"üéâ Impostors Win!",winnersPlayers:"üéâ Players Win!",maxPlayersReached:"Maximum of {max} players reached",nameAlreadyUsed:"This name is already in use. Choose a different one.",needMinPlayers:"You need at least 3 players",impostorsTooMany:"The number of impostors must be less than the number of players"},fr:{gameTitle:"üé≠ Imposteur",startButton:"Commencer le Jeu",selectThemes:"S√©lectionner les Th√®mes",selectThemesSubtitle:"Choisissez un ou plusieurs th√®mes pour les mots secrets",themesSelected:"Th√®mes s√©lectionn√©s:",continueToSetup:"Continuer √† la Configuration",words:"mots",configuration:"Configuration",impostorCount:"Nombre d'imposteurs:",timeMode:"Mode de temps:",timeModeInfinite:"Infini",timeModeTimed:"Minuteur",minutes:"Minutes:",players:"Joueurs",playerNamePlaceholder:"Nom du joueur",addButton:"‚ûï Ajouter",playersCount:"Joueurs:",startGame:"Commencer le Jeu",changeThemes:"Changer les Th√®mes",swipeUp:"Glissez vers le haut",toSeeRole:"pour voir votre r√¥le",nextPlayer:"Joueur Suivant",startGameNow:"Commencer le Jeu",impostor:"IMPOSTEUR",impostorSubtitle:"Agissez naturellement",yourWordIs:"VOTRE MOT EST:",revealedByButton:"üòà Vous ne m'avez pas trouv√©!",gameStarted:"Le jeu a commenc√©!",gameContinues:"Le jeu continue...",gameOver:"C'est fini!",discoverImpostors:"D√©couvrez qui sont les imposteurs",impostorsRemaining:"Imposteurs √† d√©couvrir:",revealImpostor:"R√©v√©ler l'Imposteur",revealNextImpostor:"R√©v√©ler le Prochain Imposteur",allRevealed:"Tous R√©v√©l√©s!",voteForImpostors:"Voter pour les Imposteurs",selectPlayers:"S√©lectionnez les suspects",votesRemaining:"Votes restants:",confirmVotes:"Confirmer les Votes",votingResults:"R√©sultats du Vote",correctGuess:"Correct! √âtait un imposteur",wrongGuess:"Faux! N'√©tait pas un imposteur",playAgain:"Rejouer",backToStart:"Retour au D√©but",winnersImpostors:"üéâ Les Imposteurs Gagnent!",winnersPlayers:"üéâ Les Joueurs Gagnent!",maxPlayersReached:"Maximum de {max} joueurs atteint",nameAlreadyUsed:"Ce nom est d√©j√† utilis√©. Choisissez-en un autre.",needMinPlayers:"Vous avez besoin d'au moins 3 joueurs",impostorsTooMany:"Le nombre d'imposteurs doit √™tre inf√©rieur au nombre de joueurs"},zh:{gameTitle:"üé≠ ÂÜíÂêçÈ°∂ÊõøËÄÖ",startButton:"ÂºÄÂßãÊ∏∏Êàè",selectThemes:"ÈÄâÊã©‰∏ªÈ¢ò",selectThemesSubtitle:"‰∏∫ÁßòÂØÜËØçÈÄâÊã©‰∏Ä‰∏™ÊàñÂ§ö‰∏™‰∏ªÈ¢ò",themesSelected:"Â∑≤ÈÄâ‰∏ªÈ¢òÔºö",continueToSetup:"ÁªßÁª≠ËÆæÁΩÆ",words:"‰∏™ËØç",configuration:"ÈÖçÁΩÆ",impostorCount:"ÂÜíÂêçÈ°∂ÊõøËÄÖÊï∞ÈáèÔºö",timeMode:"Êó∂Èó¥Ê®°ÂºèÔºö",timeModeInfinite:"Êó†Èôê",timeModeTimed:"ËÆ°Êó∂Âô®",minutes:"ÂàÜÈíüÔºö",players:"Áé©ÂÆ∂",playerNamePlaceholder:"Áé©ÂÆ∂ÂßìÂêç",addButton:"‚ûï Ê∑ªÂä†",playersCount:"Áé©ÂÆ∂Ôºö",startGame:"ÂºÄÂßãÊ∏∏Êàè",changeThemes:"Êõ¥Êîπ‰∏ªÈ¢ò",swipeUp:"Âêë‰∏äÊªëÂä®",toSeeRole:"Êü•Áúã‰Ω†ÁöÑËßíËâ≤",nextPlayer:"‰∏ã‰∏Ä‰ΩçÁé©ÂÆ∂",startGameNow:"ÂºÄÂßãÊ∏∏Êàè",impostor:"ÂÜíÂêçÈ°∂ÊõøËÄÖ",impostorSubtitle:"Ë°®Áé∞Ëá™ÁÑ∂",yourWordIs:"‰Ω†ÁöÑËØçÊòØÔºö",revealedByButton:"üòà ‰Ω†‰ª¨Ê≤°ÊâæÂà∞ÊàëÔºÅ",gameStarted:"Ê∏∏ÊàèÂºÄÂßã‰∫ÜÔºÅ",gameContinues:"Ê∏∏ÊàèÁªßÁª≠...",gameOver:"Ê∏∏ÊàèÁªìÊùüÔºÅ",discoverImpostors:"ÊâæÂá∫ÂÜíÂêçÈ°∂ÊõøËÄÖ",impostorsRemaining:"ÂæÖÂèëÁé∞ÁöÑÂÜíÂêçÈ°∂ÊõøËÄÖÔºö",revealImpostor:"Êè≠Èú≤ÂÜíÂêçÈ°∂ÊõøËÄÖ",revealNextImpostor:"Êè≠Èú≤‰∏ã‰∏Ä‰∏™ÂÜíÂêçÈ°∂ÊõøËÄÖ",allRevealed:"ÂÖ®ÈÉ®Êè≠Èú≤ÔºÅ",voteForImpostors:"ÊäïÁ•®ÊâæÂá∫ÂÜíÂêçÈ°∂ÊõøËÄÖ",selectPlayers:"ÈÄâÊã©ÂèØÁñë‰∫∫Âëò",votesRemaining:"Ââ©‰ΩôÊäïÁ•®Ôºö",confirmVotes:"Á°ÆËÆ§ÊäïÁ•®",votingResults:"ÊäïÁ•®ÁªìÊûú",correctGuess:"Ê≠£Á°ÆÔºÅÊòØÂÜíÂêçÈ°∂ÊõøËÄÖ",wrongGuess:"ÈîôËØØÔºÅ‰∏çÊòØÂÜíÂêçÈ°∂ÊõøËÄÖ",playAgain:"ÂÜçÁé©‰∏ÄÊ¨°",backToStart:"ËøîÂõûÂºÄÂßã",winnersImpostors:"üéâ ÂÜíÂêçÈ°∂ÊõøËÄÖËé∑ËÉúÔºÅ",winnersPlayers:"üéâ Áé©ÂÆ∂Ëé∑ËÉúÔºÅ",maxPlayersReached:"Â∑≤ËææÂà∞ÊúÄÂ§ö {max} ÂêçÁé©ÂÆ∂",nameAlreadyUsed:"Ê≠§ÂêçÁß∞Â∑≤Ë¢´‰ΩøÁî®„ÄÇËØ∑ÈÄâÊã©ÂÖ∂‰ªñÂêçÁß∞„ÄÇ",needMinPlayers:"Ëá≥Â∞ëÈúÄË¶Å 3 ÂêçÁé©ÂÆ∂",impostorsTooMany:"ÂÜíÂêçÈ°∂ÊõøËÄÖÁöÑÊï∞ÈáèÂøÖÈ°ªÂ∞ë‰∫éÁé©ÂÆ∂Êï∞Èáè"}};function s(e,t={}){var o;const r=localStorage.getItem("language")||"es";let n=(null==(o=a[r])?void 0:o[e])||a.es[e]||e;return Object.keys(t).forEach(e=>{n=n.replace(`{${e}}`,t[e])}),n}function i(){return localStorage.getItem("language")||"es"}function l(){document.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");e.textContent=s(t)}),document.querySelectorAll("[data-i18n-placeholder]").forEach(e=>{const t=e.getAttribute("data-i18n-placeholder");e.placeholder=s(t)}),document.querySelectorAll("option[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");e.textContent=s(t)}),function(){const e=i();document.querySelectorAll(".language-dropdown").forEach(t=>{t.value=e})}()}function c(){i(),l(),document.querySelectorAll(".language-dropdown").forEach(e=>{e.addEventListener("change",e=>{const t=e.target.value;var o;a[o=t]&&localStorage.setItem("language",o),l();const r=new CustomEvent("language-changed",{detail:{language:t}});document.dispatchEvent(r)})})}function d(){const e=document.getElementById("impostor-picker"),t=document.getElementById("impostor-count-value"),o=document.getElementById("timer-mode"),r=document.getElementById("timer-picker"),a=document.getElementById("timer-minutes-value"),i=document.getElementById("timer-input-group"),l=document.getElementById("player-name-input"),c=document.getElementById("add-player-btn"),d=document.getElementById("players-list"),m=document.getElementById("player-count"),u=document.getElementById("start-game-btn"),p=document.getElementById("back-to-themes-btn");if(!e||!t)return void console.error("Number picker elements not found");let g=1,h=5;function v(e,t,o,r,n,a){let s=0,i=!1;const l=t=>{i=!0,s=t.type.includes("mouse")?t.clientY:t.touches[0].clientY,e.style.cursor="grabbing",t.preventDefault()},c=e=>{if(!i)return;const l=e.type.includes("mouse")?e.clientY:e.touches[0].clientY,c=s-l,d=Math.round(c/20);if(Math.abs(d)>0){const e=o(),i="function"==typeof a?a():a;let c=e+d;c=Math.max(n,Math.min(i,c)),c!==e&&(r(c),t.textContent=c,s=l,t.style.transform="scale(1.1)",setTimeout(()=>{t.style.transform="scale(1)"},100))}},d=()=>{i=!1,e.style.cursor="grab"};e.addEventListener("mousedown",l),window.addEventListener("mousemove",c),window.addEventListener("mouseup",d),e.addEventListener("touchstart",l,{passive:!1}),e.addEventListener("touchmove",c,{passive:!1}),e.addEventListener("touchend",d)}function f(){const e=l.value.trim();if(!e)return;n.players.some(t=>t.name.toLowerCase()===e.toLowerCase())?alert(s("nameAlreadyUsed")):n.addPlayer(e)?(l.value="",b(),C()):alert(s("maxPlayersReached",{max:n.maxPlayers}))}function b(){d.innerHTML="",n.players.forEach(e=>{const t=document.createElement("div");t.className="player-item",t.innerHTML=`\n        <img src="${e.avatar}" alt="${e.name}" class="player-avatar">\n        <span class="player-name">${e.name}</span>\n        <button class="btn-remove" data-id="${e.id}">‚úï</button>\n      `,d.appendChild(t)}),m.textContent=n.players.length,document.querySelectorAll(".btn-remove").forEach(e=>{e.addEventListener("click",e=>{const t=parseFloat(e.target.dataset.id);n.removePlayer(t),b(),C()})})}function C(){const e=n.players.length>=3&&n.impostorCount<n.players.length&&n.impostorCount>=1&&n.selectedThemes.length>0;u.disabled=!e}v(e,t,()=>g,e=>{g=e,n.impostorCount=e,C()},1,999),v(r,a,()=>h,e=>{h=e,n.timerMinutes=e},1,30),o.addEventListener("change",()=>{n.timerMode=o.value,i.style.display="timed"===o.value?"block":"none"}),p.addEventListener("click",()=>{y("theme-screen")}),c.addEventListener("click",f),l.addEventListener("keypress",e=>{"Enter"===e.key&&f()}),u.addEventListener("click",()=>{if(n.players.length<3)return void alert(s("needMinPlayers"));if(n.impostorCount>=n.players.length)return void alert(s("impostorsTooMany"));n.assignRoles(),y("reveal-screen");const e=new CustomEvent("game-start");document.dispatchEvent(e)}),C()}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("start-btn").addEventListener("click",()=>{y("theme-screen")})}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("themes-grid"),o=document.getElementById("selected-count"),r=document.getElementById("confirm-themes-btn");function a(){t.innerHTML="";const i=function(){const t=localStorage.getItem("language")||"es";return e[t]||e.es}();Object.keys(i).forEach(e=>{const o=i[e],r=n.selectedThemes.includes(e),l=document.createElement("div");l.className="theme-card "+(r?"selected":""),l.dataset.theme=e,l.innerHTML=`\n        <div class="theme-check">${r?"‚úì":""}</div>\n        <div class="theme-name">${o.name}</div>\n        <div class="theme-count">${Object.keys(o.words).length} ${s("words")}</div>\n      `,l.addEventListener("click",()=>function(e){const t=n.selectedThemes.indexOf(e);t>-1?n.selectedThemes.splice(t,1):n.selectedThemes.push(e);a()}(e)),t.appendChild(l)}),function(){const e=n.selectedThemes.length;o.textContent=e,r.disabled=0===e}()}r.addEventListener("click",()=>{n.selectedThemes.length>0&&y("setup-screen")}),document.addEventListener("language-changed",()=>{a()}),a()}),document.addEventListener("DOMContentLoaded",()=>{d()});let m=0,u=0,p=!1,g=!1,h=0;function y(e){document.querySelectorAll(".screen").forEach(e=>{e.classList.remove("active")}),document.getElementById(e).classList.add("active")}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("current-player-avatar"),t=document.getElementById("current-player-name"),o=document.getElementById("reveal-card"),r=document.getElementById("reveal-cover");document.getElementById("reveal-content");const a=document.getElementById("role-text"),i=document.getElementById("next-player-btn");function l(){const o=n.getCurrentPlayer();o&&(e.src=o.avatar,t.textContent=o.name,o.isImpostor?a.innerHTML=`\n        <div class="impostor-role">\n          <span class="role-icon">üé≠</span>\n          <h3>${s("impostor")}</h3>\n          <p>${s("impostorSubtitle")}</p>\n        </div>\n      `:a.innerHTML=`\n        <div class="word-role">\n          <span class="role-icon">üìù</span>\n          <h3>${s("yourWordIs")}</h3>\n          <p class="secret-word">${n.getCurrentWord()}</p>\n        </div>\n      `,g=!1,h=0,r.style.transition="transform 0.3s ease, opacity 0.3s ease",r.style.transform="translateY(0)",r.style.opacity="1",c())}function c(){n.isLastPlayer()?i.textContent=s("startGameNow"):i.textContent=s("nextPlayer"),i.disabled=!g,i.style.opacity=g?"1":"0.5",i.style.cursor=g?"pointer":"not-allowed"}function d(e){p=!0,m=e.type.includes("touch")?e.touches[0].clientY:e.clientY,o.style.cursor="grabbing",r.style.transition="none"}function v(e){if(!p)return;e.preventDefault(),u=e.type.includes("touch")?e.touches[0].clientY:e.clientY;let t=h+(m-u);t=Math.max(0,Math.min(300,t));const o=Math.max(0,1-t/300);r.style.transform=`translateY(-${t}px)`,r.style.opacity=o,t>=150&&(g||(g=!0,c()))}function f(){if(!p)return;p=!1,o.style.cursor="grab";let e=h+(m-u);e=Math.max(0,Math.min(300,e)),r.style.transition="transform 0.3s ease, opacity 0.3s ease",e>=150?(g||(g=!0,c()),h=300,r.style.transform="translateY(-300px)",r.style.opacity="0"):(h=0,r.style.transform="translateY(0)",r.style.opacity="1")}o.addEventListener("touchstart",d,{passive:!1}),o.addEventListener("touchmove",v,{passive:!1}),o.addEventListener("touchend",f),o.addEventListener("mousedown",d),document.addEventListener("mousemove",v),document.addEventListener("mouseup",f),i.addEventListener("click",()=>{if(g)if(n.nextPlayer())l();else{y("game-screen");const e=new CustomEvent("reveal-complete");document.dispatchEvent(e)}}),document.addEventListener("game-start",()=>{l()}),document.addEventListener("language-changed",()=>{const e=document.getElementById("reveal-screen");if(!e||!e.classList.contains("active"))return;console.log("Language changed on reveal screen, updating word...");const t=n.getCurrentPlayer();if(t){if(console.log("Player:",t.name,"Is impostor:",t.isImpostor),t.isImpostor)a.innerHTML=`\n          <div class="impostor-role">\n            <span class="role-icon">üé≠</span>\n            <h3>${s("impostor")}</h3>\n            <p>${s("impostorSubtitle")}</p>\n          </div>\n        `;else{const e=n.getCurrentWord();console.log("Translated word:",e),console.log("Your word is label:",s("yourWordIs")),a.innerHTML=`\n          <div class="word-role">\n            <span class="role-icon">üìù</span>\n            <h3>${s("yourWordIs")}</h3>\n            <p class="secret-word">${e}</p>\n          </div>\n        `}a.style.display="none",a.offsetHeight,a.style.display="",n.isLastPlayer()?i.textContent=s("startGameNow"):i.textContent=s("nextPlayer")}})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("timer-text"),t=document.querySelector(".timer-display"),o=document.querySelector("#game-screen h2"),r=document.querySelector(".game-info"),a=document.getElementById("impostors-remaining"),i=document.getElementById("reveal-impostor-btn"),l=document.getElementById("vote-btn"),c=document.getElementById("voting-section"),d=document.getElementById("voting-players-list"),m=document.getElementById("votes-remaining"),u=document.getElementById("confirm-votes-btn"),p=document.getElementById("revealed-impostors"),g=document.getElementById("winners-section"),h=document.getElementById("winners-content"),v=document.getElementById("game-over-actions"),f=document.getElementById("play-again-btn"),b=document.getElementById("back-to-setup-btn");function C(){h.innerHTML="",g.style.display="block";const e=document.querySelectorAll(".revealed-impostor-card.revealed-by-button"),t=[];e.forEach(e=>{const o=e.querySelector("h3").textContent,r=n.players.find(e=>e.name===o&&e.isImpostor);r&&t.push(r)});if(0===t.length&&n.revealedImpostors.length===n.impostorCount)h.innerHTML=`\n        <div class="winners-announcement">\n          <h2>${s("winnersPlayers")}</h2>\n        </div>\n      `;else{const e=n.players.filter(e=>{if(!e.isImpostor)return!1;if(t.find(t=>t.id===e.id))return!0;return!n.revealedImpostors.find(t=>t.id===e.id)});h.innerHTML=`\n        <div class="winners-announcement">\n          <h2>${s("winnersImpostors")}</h2>\n          <div class="winners-list">\n            ${e.map(e=>`\n              <div class="winner-card">\n                <img src="${e.avatar}" alt="${e.name}" class="winner-avatar">\n                <div class="winner-name">${e.name}</div>\n              </div>\n            `).join("")}\n          </div>\n        </div>\n      `}}function w(){const e=h.querySelectorAll(".winner-card"),t=Array.from(e).map(e=>e.querySelector(".winner-name").textContent);if(0===t.length){p.querySelectorAll(".revealed-impostor-card").forEach(e=>{e.querySelector(".impostor-badges")&&(e.style.display="none")})}else{p.querySelectorAll(".revealed-impostor-card").forEach(e=>{const o=e.querySelector("h3").textContent;t.includes(o)&&(e.style.display="none")})}}function I(){d.innerHTML="",m.textContent=n.getRemainingVotes(),n.players.forEach(e=>{if(n.hasBeenVotedBefore(e.id))return;if(n.revealedImpostors.some(t=>t.id===e.id))return;const t=document.createElement("div");t.className="voting-player-card",n.isPlayerVoted(e.id)&&t.classList.add("voted"),t.innerHTML=`\n        <img src="${e.avatar}" alt="${e.name}" class="voting-avatar">\n        <span class="voting-player-name">${e.name}</span>\n        <span class="vote-check">${n.isPlayerVoted(e.id)?"‚úì":""}</span>\n      `,t.addEventListener("click",()=>{n.voteForPlayer(e.id),I(),function(){const e=n.votedPlayers.length;u.disabled=0===e,m.textContent=n.getRemainingVotes()}()}),d.appendChild(t)})}i.addEventListener("click",()=>{const e=n.revealNextImpostor();if(!e)return;const o=document.createElement("div");o.className="revealed-impostor-card revealed-by-button",o.innerHTML=`\n      <img src="${e.avatar}" alt="${e.name}" class="impostor-avatar">\n      <div class="impostor-info">\n        <h3>${e.name}</h3>\n        <div class="impostor-badges">\n          <span class="impostor-badge">üé≠ ${s("impostor")}</span>\n          <span class="reveal-message">${s("revealedByButton")}</span>\n        </div>\n      </div>\n    `,p.appendChild(o);const c=n.impostorCount-n.revealedImpostors.length;a.textContent=c,n.hasMoreImpostors()?(document.querySelector("#game-screen h2").textContent=s("gameContinues"),i.textContent=s("revealNextImpostor"),i.disabled=!1):(i.disabled=!0,i.style.display="none",l.style.display="none",t.style.display="none",r.style.display="none",document.querySelector("#game-screen h2").textContent=s("gameOver"),n.stopTimer(),C(),w(),v.style.display="flex")}),l.addEventListener("click",()=>{c.style.display="block",l.style.display="none",i.style.display="none",t.style.display="none",o.style.display="none",r.style.display="none",I()}),u.addEventListener("click",()=>{!function(e){e.forEach(e=>{const t=document.createElement("div");t.className="revealed-impostor-card "+(e.correct?"correct-vote":"wrong-vote"),t.innerHTML=`\n        <img src="${e.player.avatar}" alt="${e.player.name}" class="impostor-avatar">\n        <div class="impostor-info">\n          <h3>${e.player.name}</h3>\n          <span class="vote-result ${e.correct?"correct":"wrong"}">\n            ${e.correct?"‚úì "+s("correctGuess"):"‚úó "+s("wrongGuess")}\n          </span>\n        </div>\n      `,p.appendChild(t)})}(n.processVotes()),c.style.display="none",t.style.display="flex",r.style.display="block";const e=n.impostorCount-n.revealedImpostors.length;a.textContent=e,n.hasMoreImpostors()?(o.style.display="block",document.querySelector("#game-screen h2").textContent=s("gameContinues"),l.style.display="inline-block",l.disabled=!1,i.style.display="inline-block",i.disabled=!1,i.textContent=s("revealNextImpostor")):(l.style.display="none",i.style.display="none",t.style.display="none",r.style.display="none",o.style.display="block",document.querySelector("#game-screen h2").textContent=s("gameOver"),n.stopTimer(),C(),w(),v.style.display="flex"),n.resetVoting()}),f.addEventListener("click",()=>{n.reset(),n.assignRoles(),y("reveal-screen");const e=new CustomEvent("game-start");document.dispatchEvent(e)}),b.addEventListener("click",()=>{n.reset(),y("setup-screen")}),document.addEventListener("reveal-complete",()=>{document.querySelector("#game-screen h2").textContent=s("gameStarted"),t.style.display="flex",o.style.display="block",r.style.display="block",a.textContent=n.impostorCount,p.innerHTML="",g.style.display="none",h.innerHTML="",v.style.display="none",c.style.display="none",l.style.display="inline-block",i.style.display="inline-block",i.textContent=s("revealImpostor"),"infinite"===n.timerMode?(e.textContent="‚àû",i.disabled=!1,l.disabled=!1):(e.textContent=`${n.timerMinutes}:00`,i.disabled=!0,l.disabled=!0,n.startGameTimer()),n.resetVoting()}),document.addEventListener("language-changed",()=>{n.revealedImpostors.length===n.impostorCount?(i.textContent=s("allRevealed"),document.querySelector("#game-screen h2").textContent=s("gameOver")):n.revealedImpostors.length>0?(i.textContent=s("revealNextImpostor"),document.querySelector("#game-screen h2").textContent=s("gameContinues")):(i.textContent=s("revealImpostor"),document.querySelector("#game-screen h2").textContent=s("gameStarted"));document.querySelectorAll(".impostor-badge").forEach(e=>{e.textContent=`üé≠ ${s("impostor")}`});document.querySelectorAll(".vote-result.correct").forEach(e=>{e.textContent="‚úì "+s("correctGuess")});document.querySelectorAll(".vote-result.wrong").forEach(e=>{e.textContent="‚úó "+s("wrongGuess")});if(document.querySelectorAll(".reveal-message").forEach(e=>{e.textContent=s("revealedByButton")}),"none"!==l.style.display&&(l.textContent=s("voteForImpostors")),"none"!==g.style.display){const e=g.querySelector(".winners-announcement h2");if(e){const t=e.textContent.includes("Jugadores")||e.textContent.includes("Players")||e.textContent.includes("Joueurs")||e.textContent.includes("Áé©ÂÆ∂");e.textContent=s(t?"winnersPlayers":"winnersImpostors")}}})}),document.addEventListener("DOMContentLoaded",()=>{console.log("Impostor Game Loaded"),c();const e=document.getElementById("app-version");e&&(e.textContent="1.0.0"),y("start-screen")});
